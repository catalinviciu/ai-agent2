<div class="flex flex-col min-h-full bg-white rounded-xl relative font-sans">
    <!-- Mobile Viewport Container -->
    <div class="flex-1 bg-white flex flex-col relative">
        <!-- Scrollable Content -->
        <div class="flex-1">
            <div class="p-6 pb-24">
                <!-- Header -->
                <div class="flex items-center justify-between mb-6 border-b border-gray-100 pb-4">
                    <h2 class="text-sm font-bold text-gray-900 m-0">
                        DVIR Form: {{ data?.Name || 'Ford Ranger - Extended Compliance with Maintenance' }}
                    </h2>
                    <div
                        class="px-2 py-0.5 border border-gray-900 rounded-full text-[10px] font-bold text-gray-900 uppercase tracking-wide">
                        MOBILE PREVIEW
                    </div>
                </div>

                <!-- Title & Instructions -->
                <div class="mb-8">
                    <h1
                        class="font-neue-text font-bold text-[16px] leading-[22px] tracking-normal text-gray-900 mb-1 m-0">
                        Start inspection</h1>
                    <p class="font-neue-text font-normal text-[16px] leading-[22px] tracking-normal text-gray-500 m-0">
                        Add inspection details including defects (if found).
                    </p>
                </div>

                <!-- Inspection Items -->
                <div class="space-y-8">
                    @for (group of groupedItems; track group.category) {
                    <div>
                        <h4
                            class="font-neue-text font-bold text-[16px] leading-[22px] tracking-normal text-gray-900 mb-3 m-0">
                            {{ group.category }}
                        </h4>

                        <!-- Photos Grid -->
                        @if (hasPhoto(group.items)) {
                        <div class="grid grid-cols-4 gap-4 items-end">
                            @for (item of group.items; track item.Position) {
                            <div class="flex flex-col gap-2">
                                <div class="flex items-start gap-0.5 min-h-[44px]">
                                    <span
                                        class="font-neue-text font-normal text-[16px] leading-[22px] tracking-normal text-gray-900">{{
                                        item.Name }}</span>
                                    @if (item.RequireValue) { <span class="text-blue-500 text-xs font-bold">*</span> }
                                </div>
                                <button
                                    class="w-[183px] h-[80px] bg-gray-50 rounded-[12px] flex flex-col items-center justify-center gap-[10px] pt-[16px] pr-[47px] pb-[16px] pl-[47px] text-gray-500 hover:bg-gray-100 transition-all cursor-default border-none">
                                    <lucide-icon [img]="Camera" class="w-5 h-5 text-gray-900"></lucide-icon>
                                    <span class="text-[10px] text-gray-900">Take photo</span>
                                </button>
                            </div>
                            }
                        </div>
                        } @else {
                        <!-- Checkbox List -->
                        <div class="flex flex-col border-t border-gray-100">
                            @for (item of group.items; track item.Position) {
                            <div class="flex items-center gap-4 py-4 border-b border-gray-100">
                                <!-- Checkbox -->
                                <button (click)="toggleChecked(item.Position)"
                                    class="w-5 h-5 rounded border flex items-center justify-center transition-all shrink-0 cursor-pointer bg-white"
                                    [class.border-gray-300]="!getItemState(item.Position).checked"
                                    [class.border-gray-900]="getItemState(item.Position).checked"
                                    [class.bg-gray-900]="getItemState(item.Position).checked">
                                    @if (getItemState(item.Position).checked) {
                                    <lucide-icon [img]="Check" class="w-3.5 h-3.5 text-white"></lucide-icon>
                                    }
                                </button>

                                <!-- Item Name -->
                                <span
                                    class="font-neue-text font-normal text-[16px] leading-[22px] tracking-normal text-gray-900">{{
                                    item.Name || 'Item' }}</span>
                            </div>
                            }
                        </div>
                        }
                    </div>
                    }
                </div>
            </div>
        </div>
    </div>
</div>